// DONNÉES DES MEMBRES : Votre tableau 'window.members'
// Il est défini directement ici.
window.members = [
    {
        nom: "Blaze Aurélien",
        role: "Smart Contract Dev",
        image: "https://www.weebly.com/editor/uploads/9/7/1/8/9718598/custom_themes/990953050610449310/files/logo_BW_WEB_200x200.jpg",
        fiche: "blaze.html",
        metier: "Blockchain & Smart Contract"
    },
    {
        nom: "Sarah Green",
        role: "UX Designer",
        image: "https://www.weebly.com/editor/uploads/9/7/1/8/9718598/custom_themes/990953050610449310/files/logo_BW_WEB_200x200.jpg",
        fiche: "sarah.html",
        metier: "UX / UI Design"
    },
    {
        nom: "Michael Johnson",
        role: "Cybersecurity Specialist",
        image: "https://www.weebly.com/editor/uploads/9/7/1/8/9718598/custom_themes/990953050610449310/files/logo_BW_WEB_200x200.jpg",
        fiche: "michael.html",
        metier: "Cybersécurité"
    },
    {
        nom: "Alice Brown",
        role: "Web3 Frontend Developer",
        image: "https://www.weebly.com/editor/uploads/9/7/1/8/9718598/custom_themes/990953050610449310/files/logo_BW_WEB_200x200.jpg",
        fiche: "alice.html",
        metier: "Développement Frontend"
    },
    {
        nom: "David Lee",
        role: "Data Analyst & AI",
        image: "https://www.weebly.com/editor/uploads/9/7/1/8/9718598/custom_themes/990953050610449310/files/logo_BW_WEB_200x200.jpg",
        fiche: "david.html",
        metier: "Data & Intelligence Artificielle"
    },
    {
        nom: "Emily White",
        role: "Motion Designer",
        image: "https://www.weebly.com/editor/uploads/9/7/1/8/9718598/custom_themes/990953050610449310/files/logo_BW_WEB_200x200.jpg",
        fiche: "emily.html",
        metier: "Design & Création Visuelle"
    },
    {
        nom: "Robert Black",
        role: "Blockchain Architect",
        image: "https://www.weebly.com/editor/uploads/9/7/1/8/9718598/custom_themes/990953050610449310/files/logo_BW_WEB_200x200.jpg",
        fiche: "robert.html",
        metier: "Blockchain & Smart Contract"
    },
    {
        nom: "Laura Adams",
        role: "Product Designer",
        image: "https://www.weebly.com/editor/uploads/9/7/1/8/9718598/custom_themes/990953050610449310/files/logo_BW_WEB_200x200.jpg",
        fiche: "laura.html",
        metier: "UX / UI Design"
    },
    {
        nom: "Chris Miller",
        role: "Community Builder",
        image: "https://www.weebly.com/editor/uploads/9/7/1/8/9718598/custom_themes/990953050610449310/files/logo_BW_WEB_200x200.jpg",
        fiche: "chris.html",
        metier: "Communication & Community"
    },
    {
        nom: "Daniel Wilson",
        role: "DevOps Web3",
        image: "https://www.weebly.com/editor/uploads/9/7/1/8/9718598/custom_themes/990953050610449310/files/logo_BW_WEB_200x200.jpg",
        fiche: "daniel.html",
        metier: "Infrastructure & Cloud"
    },
    {
        nom: "Olivia King",
        role: "Cloud Architect",
        image: "https://www.weebly.com/editor/uploads/9/7/1/8/9718598/custom_themes/990953050610449310/files/logo_BW_WEB_200x200.jpg",
        fiche: "olivia.html",
        metier: "Infrastructure & Cloud"
    },
    {
        nom: "James Wright",
        role: "Mobile Developer",
        image: "https://www.weebly.com/editor/uploads/9/7/1/8/9718598/custom_themes/990953050610449310/files/logo_BW_WEB_200x200.jpg",
        fiche: "james.html",
        metier: "Développement Frontend"
    },
    {
        nom: "Sophia Hall",
        role: "Network Engineer",
        image: "https://www.weebly.com/editor/uploads/9/7/1/8/9718598/custom_themes/990953050610449310/files/logo_BW_WEB_200x200.jpg",
        fiche: "sophia.html",
        metier: "Cybersécurité"
    },
    {
        nom: "William Turner",
        role: "Quantum R&D",
        image: "https://www.weebly.com/editor/uploads/9/7/1/8/9718598/custom_themes/990953050610449310/files/logo_BW_WEB_200x200.jpg",
        fiche: "william.html",
        metier: "Data & Intelligence Artificielle"
    },
    {
        nom: "Isabella Clark",
        role: "Interaction Designer",
        image: "https://www.weebly.com/editor/uploads/9/7/1/8/9718598/custom_themes/990953050610449310/files/logo_BW_WEB_200x200.jpg",
        fiche: "isabella.html",
        metier: "UX / UI Design"
    },
    {
        nom: "Joseph Lewis",
        role: "Game Developer",
        image: "https://www.weebly.com/editor/uploads/9/7/1/8/9718598/custom_themes/990953050610449310/files/logo_BW_WEB_200x200.jpg",
        fiche: "joseph.html",
        metier: "Design & Création Visuelle"
    },
    {
        nom: "Mia Young",
        role: "XR / VR Designer",
        image: "https://www.weebly.com/editor/uploads/9/7/1/8/9718598/custom_themes/990953050610449310/files/logo_BW_WEB_200x200.jpg",
        fiche: "mia.html",
        metier: "Design & Création Visuelle"
    },
    {
        nom: "Benjamin Scott",
        role: "AR/VR Developer",
        image: "https://www.weebly.com/editor/uploads/9/7/1/8/9718598/custom_themes/990953050610449310/files/logo_BW_WEB_200x200.jpg",
        fiche: "benjamin.html",
        metier: "Design & Création Visuelle"
    },
    {
        nom: "Charlotte Baker",
        role: "Ethical Hacker",
        image: "https://www.weebly.com/editor/uploads/9/7/1/8/9718598/custom_themes/990953050610449310/files/logo_BW_WEB_200x200.jpg",
        fiche: "charlotte.html",
        metier: "Cybersécurité"
    },
    {
        nom: "Jane Doe",
        role: "Blockchain Advisor",
        image: "https://www.weebly.com/editor/uploads/9/7/1/8/9718598/custom_themes/990953050610449310/files/logo_BW_WEB_200x200.jpg",
        fiche: "jane.html",
        metier: "Blockchain & Smart Contract"
    }
];

// Logique du Hub
document.addEventListener("DOMContentLoaded", function() {
    const membersData = window.members; // Récupère les données des membres

    const allMetiers = membersData.flatMap(m => Array.isArray(m.metier) ? m.metier : [m.metier]);
    const uniqueFilters = [...new Set(allMetiers)].sort();

    const filtersDiv = document.getElementById("filters");
    const memberGrid = document.getElementById("member-grid");
    const backButton = document.getElementById("backButton"); // Utilisation de l'ID du bouton

    function renderMembers(list) {
      memberGrid.innerHTML = "";
      list.forEach(m => {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <img src="${m.image}" alt="${m.nom}">
          <div class="nom">${m.nom}</div>
          <div class="role">${m.role}</div>
          <a href="${m.fiche}" target="_blank">Voir la fiche</a>
        `;
        memberGrid.appendChild(card);
      });
      // Scroll to the grid if on mobile after rendering members
      if (window.innerWidth <= 768) {
          const y = memberGrid.getBoundingClientRect().top + window.scrollY;
          window.scrollTo({ top: y - 20, behavior: "smooth" });
      }
    }

    function showAll() {
      renderMembers(membersData);
      filtersDiv.style.display = "flex";
      backButton.style.display = "none";
      // Scroll back to the top of the filtersDiv
      const y = filtersDiv.getBoundingClientRect().top + window.scrollY;
      const offset = window.innerWidth > 768 ? 100 : 20;
      window.scrollTo({ top: y - offset, behavior: "smooth" });
    }

    function filterBy(metier) {
      const filtered = membersData.filter(m =>
          Array.isArray(m.metier) ? m.metier.includes(metier) : m.metier === metier
      );
      renderMembers(filtered);
      filtersDiv.style.display = "none";
      backButton.style.display = "block";
    }

    // Générer les boutons de métier
    uniqueFilters.forEach(metier => {
      const btn = document.createElement("button");
      btn.textContent = metier;
      btn.onclick = () => filterBy(metier);
      filtersDiv.appendChild(btn);
    });

    // Écouteur d'événement pour le bouton de retour
    backButton.addEventListener("click", showAll);
backButton.addEventListener("click", showAll);
});
